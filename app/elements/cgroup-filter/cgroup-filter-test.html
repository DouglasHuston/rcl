<!doctype html>
<html>
<head>
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <title>my-greeting-basic</title>

  <script src="../../bower_components/webcomponentsjs/webcomponents.min.js"></script>
  <!--  Needed for running the tests from the command-line  -->
  <script src="../../../bower_components/webcomponentsjs/webcomponents.min.js"></script>
  <link rel="import" href="../../bower_components/polymer/polymer.html">
  <!--  Needed for running the tests from the command-line  -->
  <link rel="import" href="../../../bower_components/polymer/polymer.html">
  <script src="../../bower_components/web-component-tester/browser.js"></script>
  <script src="../../bower_components/test-fixture/test-fixture-mocha.js"></script>
  <!--  Needed for running the tests from the command-line  -->
  <script src="../../../bower_components/test-fixture/test-fixture-mocha.js"></script>
  <link rel="import" href="../../bower_components/test-fixture/test-fixture.html">
  <!--  Needed for running the tests from the command-line  -->
  <link rel="import" href="../../../bower_components/test-fixture/test-fixture.html">

  <!-- Import the element to test -->
  <link rel="import" href="cgroup-filter.html">

</head>
<body>

  <test-fixture id="basic">
    <template>
      <cgroup-filter></cgroup-filter>
    </template>
  </test-fixture>

  <script>

    /*
     * Test interfaces:
     *
     *  - properties:
     *    - selected_cgroups
     *      - add to
     *        -> should increase length of selected_cgroups and display that cgroup
     *      - remove from
     *        -> should decrease length of selected_cgroups and no longer display that cgroup
     *    - available_cgroups
     *      - add to
     *        -> should increase length of available_cgroups and display that cgroup
     *      - remove from
     *        -> should decrease length of available_cgroups and no longer display that cgroup
     *  - clicks
     *    - on available cgroup:
     *      -> clicked cgroup should be added to selected_cgroups and display
     *    - on same available cgroup two times:
     *      -> only one copy of clicked cgroup should be present in selected_cgroups and display
     *    - on selected cgroup
     *      -> clicked cgroup should be removed from selected_cgroups and display
     *    - on "List all groups" - placing it in the checked state
     *      -> should clear search box and display all cgroups, by copying all available_cgroups
     *          into available_cgroups_displayed
     *    - on "List all groups" - placing it in the unchecked state
     *      -> should clear display area so no cgroups display, by emptying available_cgroups_displayed
     *    - on "Show full names" - placing it in the checked state
     *      -> should switch all cgroup names from abbreviations to full names
     *    - on "Show full names" - placing it in the unchecked state
     *      -> should switch all cgroup names from full names to abbreviations
     *  - text input search box
     *    - enter the first, a middle, or a final part of a cgroup name
     *    - enter the first, a middle, or a final part of a cgroup abbreviation
     *      -> should display that cgroup by putting it into available_cgroups_displayed
     */

    suite('properties', function() {
      var cf;

      setup(function() {
        cf = fixture('basic');
      });

      test('selected_cgroups - add to - should increase length of selected_cgroups ' +
            'and display that cgroup', function(done) {
        var length = cf.selected_cgroups.length;
        cf.push('selected_cgroups', {abbreviation:"OPC"});
        assert.equal(length + 1, cf.selected_cgroups.length);
        flush(function(){
          assert.equal(cf.$.selected.querySelector('paper-button').textContent,"OPC x ");
          // Cleanup
          cf.pop('selected_cgroups');
          done();
        });
      });

      test('selected_cgroups - remove from - should decrease length of selected_cgroups ' +
            'and no longer display that cgroup', function(done) {
        cf.push('selected_cgroups', {abbreviation:"OPC"});
        var length = cf.selected_cgroups.length;
        cf.pop('selected_cgroups');
        assert.equal(length - 1, cf.selected_cgroups.length);
        flush(function(){
          assert.notInclude(cf.$.selected.textContent, 'OPC');
          done();
        });
      });

      test('available_cgroups - add to - should increase length of available_cgroups and ' +
            'display that cgroup', function() {
        var length = cf.available_cgroups.length;
        cf.push('available_cgroups', {abbreviation:"OPC"});
        assert.equal(length + 1, cf.available_cgroups.length);
        flush(function(){
          assert.equal(cf.$.available_filtered.querySelector('paper-button').textContent,"OPC x ");
          // Cleanup
          cf.pop('available_cgroups');
          done();
        });
      });

      test('available_cgroups - remove from - should decrease length of available_cgroups ' +
            'and no longer display that cgroup', function() {
        cf.push('available_cgroups', {abbreviation:"OPC"});
        var length = cf.available_cgroups.length;
        cf.pop('available_cgroups');
        assert.equal(length - 1, cf.available_cgroups.length);
        flush(function(){
          assert.notInclude(cf.$.available_filtered.textContent, 'OPC');
          done();
        });
      });

    });

    suite('clicks', function() {
      var cf;

      setup(function() {
        cf = fixture('basic');
      });

      test('on available cgroup - clicked cgroup should be added to selected_cgroups and display', function() {
        assert.equal(1,0);
      });

      test('on same available cgroup two times - only one copy of clicked cgroup should be ' +
            'present in selected_cgroups and display', function() {
        assert.equal(1,0);
      });

      test('on selected cgroup - clicked cgroup should be removed from selected_cgroups and display', function() {
        assert.equal(1,0);
      });

      test('on "List all groups" - placing it in the checked state - should clear search ' +
            'box and display all cgroups, by copying all available_cgroups into ' +
            'available_cgroups_displayed', function() {
        assert.equal(1,0);
      });

      test('on "List all groups" - placing it in the unchecked state - should clear display ' +
            'area so no cgroups display, by emptying available_cgroups_displayed', function() {
        assert.equal(1,0);
      });

      test('on "Show full names" - placing it in the checked state - should switch all cgroup ' +
            'names from abbreviations to full names', function() {
        assert.equal(1,0);
      });

      test('on "Show full names" - placing it in the unchecked state - should switch all ' +
            'cgroup names from full names to abbreviations', function() {
        assert.equal(1,0);
      });

    });

    suite('search box', function() {
      var cf;

      setup(function() {
        cf = fixture('basic');
      });

      test('enter the first, a middle, or a final part of a cgroup name - should display ' +
            'that cgroup by putting it into available_cgroups_displayed', function() {
        assert.equal(1,0);
      });

      test('enter the first, a middle, or a final part of a cgroup abbreviation - should display ' +
            'that cgroup by putting it into available_cgroups_displayed', function() {
        assert.equal(1,0);
      });

    });


  </script>

</body>
</html>
